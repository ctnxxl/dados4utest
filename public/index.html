<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>DADOS4U - Consultar</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Cache busting no CSS -->
  <script>
    document.write(
      '<link rel="stylesheet" href="./css/style.css?v=' + Date.now() + '">'
    );
  </script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/notyf@3/notyf.min.css">
  <link rel="icon" type="image/png" href="./imgs/favico.ico">

  <!-- Proteção contra acesso sem login -->
  <script>
    const token = localStorage.getItem('token');
    if (!token) {
      window.location.replace('/login');
    }
  </script>
</head>
<body>
  <header>
    <div class="logo-wrapper">
      <a class="logo" href="./">
        <img src="./imgs/logo-sem-dado.png" alt="Logo Dados4U">
      </a>
    </div>
    <div class="top-bar">
      <span id="user-name" style="font-weight:bold;"></span>
      <button class="btn" id="logoutBtn">Logout</button>
      <button class="btn" id="adminBtn">Admin Panel</button>
    </div>
  </header>

  <!-- Área de busca -->
  <div class="logo-center">
    <a class="logo" href="./">
      <img src="./imgs/logo.png" alt="Logo Dados4U">
    </a>
  </div>
  <div class="search-section">
    <input
      id="valor"
      type="text"
      placeholder="Consultar CPF, nome, telefone..."
      oninput="aplicarMascara(this)"
      onkeydown="if(event.key==='Enter'){ fazerConsulta(); setTimeout(()=>{location.href='#resultado';},300); }"
    />
    <div class="radio-inline">
      <label><input type="radio" name="tipo" value="cpf_cnpj" checked />CPF/CNPJ</label>
      <label><input type="radio" name="tipo" value="nome_completo" />NOME</label>
      <label><input type="radio" name="tipo" value="numero_telefone" />TELEFONE</label>
      <label><input type="radio" name="tipo" value="email" />E-MAIL</label>
    </div>
  </div>

  <!-- Grade de resultados -->
  <div class="result-grid" id="resultado">
  </div>

  <!-- Bibliotecas externas -->
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script src="https://cdn.jsdelivr.net/npm/notyf@3/notyf.min.js"></script>

  <!-- Carrega o JS com cache busting -->
  <script type="module">
    const script = document.createElement('script');
    script.type = 'module';
    script.src = `./script/index.js?v=${Date.now()}`;
    document.body.appendChild(script);
  </script>
</body>
</html>
